<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#6c5ce7" />
  <title>BÃ¼tÃ§e Takip</title>

  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

  <link rel="stylesheet" href="style.css?v=20260212-3" />
</head>

<body>
  <header class="header">
    <div class="brand">
      <div class="brand-icon">ðŸ’°</div>
      <div class="brand-text">
        <div class="brand-title">BÃ¼tÃ§e</div>
        <div class="brand-sub" id="headerSubtitle">Plan / GerÃ§ekleÅŸen</div>
      </div>
    </div>

    <div class="auth">
      <span id="userLabel" class="auth-label">GiriÅŸ yapÄ±lmadÄ±</span>
      <button id="btnLogin" class="auth-btn" type="button">GiriÅŸ</button>
      <button id="btnLogout" class="auth-btn ghost" type="button" style="display:none;">Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </header>

  <main class="container">
    <section class="summary">
      <div class="summary-card income">
        <div class="summary-title">Gelir</div>
        <div class="summary-value" id="sumIncome">$0</div>
        <div class="summary-sub" id="sumIncomeSub">Plan / GerÃ§ek</div>
      </div>
      <div class="summary-card expense">
        <div class="summary-title">Gider</div>
        <div class="summary-value" id="sumExpense">$0</div>
        <div class="summary-sub" id="sumExpenseSub">Plan / GerÃ§ek</div>
      </div>
      <div class="summary-card net">
        <div class="summary-title">Net</div>
        <div class="summary-value" id="sumNet">$0</div>
        <div class="summary-sub" id="sumNetSub">Plan / GerÃ§ek</div>
      </div>
    </section>

    <div class="tabs">
      <div class="tab active" data-tab="budget">BÃ¼tÃ§e</div>
      <div class="tab" data-tab="transactions">Ä°ÅŸlemler</div>
      <div class="tab" data-tab="balance">BilanÃ§o</div>
    </div>

    <section class="section active" id="budget-section">
      <div class="section-title">
        <span>Kur Tahminleri (Plan)</span>
        <button class="add-btn" id="btnRatesEdit" type="button">
          <i class="fas fa-pen"></i> DÃ¼zenle
        </button>
      </div>
      <div class="rates-card" id="ratesCard"></div>

      <div class="section-title" style="margin-top:18px;">
        <span>Gelir Kalemleri</span>
        <button class="add-btn" type="button" onclick="openCategoryModal('income')">
          <i class="fas fa-plus"></i> Ekle
        </button>
      </div>
      <div id="incomeBudgets"></div>

      <div class="section-title" style="margin-top:18px;">
        <span>Gider Kalemleri</span>
        <button class="add-btn" type="button" onclick="openCategoryModal('expense')">
          <i class="fas fa-plus"></i> Ekle
        </button>
      </div>
      <div id="expenseBudgets"></div>
    </section>

    <section class="section" id="transactions-section">
      <div class="month-filter" id="monthFilter"></div>
      <div id="transactionsList"></div>
    </section>

    <section class="section" id="balance-section">
      <div class="month-filter" id="balMonthFilter"></div>

      <div class="balance-top">
        <div class="balance-kpi"><div class="kpi-title">VarlÄ±klar</div><div class="kpi-value" id="balAssets">$0</div></div>
        <div class="balance-kpi"><div class="kpi-title">BorÃ§lar</div><div class="kpi-value" id="balLiab">$0</div></div>
        <div class="balance-kpi"><div class="kpi-title">Ã–z Sermaye</div><div class="kpi-value" id="balEquity">$0</div></div>
      </div>

      <div class="chart-card">
        <div class="chart-title">AylÄ±k Trend (USD)</div>
        <canvas id="balanceChart"></canvas>
      </div>

      <!-- balance lists (gerekli idâ€™ler) -->
      <div class="balance-grid">
        <div class="balance-col">
          <div class="group">
            <div class="group-head"><span>Nakit</span>
              <button class="mini-btn" type="button" onclick="openBalItemModal('asset','cash')"><i class="fas fa-plus"></i></button>
            </div>
            <div class="group-body" id="asset-cash"></div>
          </div>
          <div class="group">
            <div class="group-head"><span>YatÄ±rÄ±mlar</span>
              <button class="mini-btn" type="button" onclick="openBalItemModal('asset','invest')"><i class="fas fa-plus"></i></button>
            </div>
            <div class="group-body" id="asset-invest"></div>
          </div>
          <div class="group">
            <div class="group-head"><span>Alacaklar</span>
              <button class="mini-btn" type="button" onclick="openBalItemModal('asset','recv')"><i class="fas fa-plus"></i></button>
            </div>
            <div class="group-body" id="asset-recv"></div>
          </div>
        </div>

        <div class="balance-col">
          <div class="group">
            <div class="group-head"><span>Krediler</span>
              <button class="mini-btn" type="button" onclick="openBalItemModal('liab','loan')"><i class="fas fa-plus"></i></button>
            </div>
            <div class="group-body" id="liab-loan"></div>
          </div>
          <div class="group">
            <div class="group-head"><span>Kredi KartÄ±</span>
              <button class="mini-btn" type="button" onclick="openBalItemModal('liab','card')"><i class="fas fa-plus"></i></button>
            </div>
            <div class="group-body" id="liab-card"></div>
          </div>
          <div class="group">
            <div class="group-head"><span>DiÄŸer BorÃ§lar</span>
              <button class="mini-btn" type="button" onclick="openBalItemModal('liab','other')"><i class="fas fa-plus"></i></button>
            </div>
            <div class="group-body" id="liab-other"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <button class="fab" type="button" onclick="openTransactionModal()">
    <i class="fas fa-plus"></i>
  </button>

  <!-- CATEGORY MODAL -->
  <div class="modal-overlay" id="categoryModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="catModalTitle">Kategori</h2>
        <button class="modal-close" type="button" onclick="closeModal('categoryModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <label>Kategori AdÄ±</label>
        <input id="catName" type="text" />

        <div class="row2">
          <div>
            <label>Para Birimi (Plan)</label>
            <select id="catCurrency">
              <option value="USD">USD</option>
              <option value="TRY">TRY</option>
              <option value="RUB">RUB</option>
            </select>
          </div>
          <div>
            <label>YÄ±llÄ±k Plan</label>
            <input id="catYearly" type="number" step="0.01" />
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn primary" id="btnSaveCategory" type="button">Kaydet</button>
        </div>
      </div>
    </div>
  </div>

  <!-- TRANSACTION MODAL -->
  <div class="modal-overlay" id="transactionModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Yeni Ä°ÅŸlem</h2>
        <button class="modal-close" type="button" onclick="closeModal('transactionModal')">Ã—</button>
      </div>

      <div class="type-toggle">
        <button class="type-btn income active" type="button" onclick="setTransactionType('income')">
          <i class="fas fa-arrow-down"></i> Gelir
        </button>
        <button class="type-btn expense" type="button" onclick="setTransactionType('expense')">
          <i class="fas fa-arrow-up"></i> Gider
        </button>
      </div>

      <div class="modal-body">
        <div class="row2">
          <div>
            <label>Tarih</label>
            <input id="txDate" type="date" />
          </div>
          <div>
            <label>Para Birimi</label>
            <select id="txCurrency">
              <option value="USD">USD</option>
              <option value="TRY">TRY</option>
              <option value="RUB">RUB</option>
            </select>
          </div>
        </div>

        <label>Tutar</label>
        <input id="txAmount" type="number" step="0.01" />

        <label>Kategori</label>
        <select id="txCategory"></select>

        <label>Not</label>
        <input id="txNote" type="text" />

        <div class="modal-actions">
          <button class="btn primary" id="btnAddTx" type="button">Kaydet</button>
        </div>

        <div class="muted small" id="txInfo"></div>
      </div>
    </div>
  </div>

  <!-- BAL ITEM MODAL -->
  <div class="modal-overlay" id="balItemModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="balItemTitle">Kalem Ekle</h2>
        <button class="modal-close" type="button" onclick="closeModal('balItemModal')">Ã—</button>
      </div>

      <div class="modal-body">
        <label>Kategori AdÄ±</label>
        <input id="balItemName" type="text" />

        <div class="row2">
          <div>
            <label>Para Birimi</label>
            <select id="balItemCurrency">
              <option value="USD">USD</option>
              <option value="TRY">TRY</option>
              <option value="RUB">RUB</option>
            </select>
          </div>
          <div>
            <label>Tutar</label>
            <input id="balItemAmount" type="number" step="0.01" />
          </div>
        </div>

        <label>Not</label>
        <input id="balItemNote" type="text" />

        <div class="modal-actions">
          <button class="btn primary" id="btnSaveBalItem" type="button">Kaydet</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="firebase.js?v=20260212-3"></script>
  <script defer src="app.js?v=20260212-3"></script>
</body>
</html>
