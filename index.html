<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="BÃ¼tÃ§e" />
  <meta name="theme-color" content="#6c5ce7" />
  <title>BÃ¼tÃ§e Takip</title>

  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

  <!-- âœ… cache kÄ±r -->
  <link rel="stylesheet" href="style.css?v=20260212-1" />
</head>

<body>
  <!-- HEADER -->
  <header class="header">
    <div class="brand">
      <div class="brand-icon">ğŸ’°</div>
      <div class="brand-text">
        <div class="brand-title">BÃ¼tÃ§e</div>
        <div class="brand-sub" id="headerSubtitle">Plan / GerÃ§ekleÅŸen</div>
      </div>
    </div>

    <div class="auth">
      <span id="userLabel" class="auth-label">GiriÅŸ yapÄ±lmadÄ±</span>
      <button id="btnLogin" class="auth-btn" type="button">GiriÅŸ</button>
      <button id="btnLogout" class="auth-btn ghost" type="button" style="display:none;">Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </header>

  <main class="container">
    <section class="summary">
      <div class="summary-card income">
        <div class="summary-title">Gelir</div>
        <div class="summary-value" id="sumIncome">$0</div>
        <div class="summary-sub" id="sumIncomeSub">Plan / GerÃ§ek</div>
      </div>
      <div class="summary-card expense">
        <div class="summary-title">Gider</div>
        <div class="summary-value" id="sumExpense">$0</div>
        <div class="summary-sub" id="sumExpenseSub">Plan / GerÃ§ek</div>
      </div>
      <div class="summary-card net">
        <div class="summary-title">Net</div>
        <div class="summary-value" id="sumNet">$0</div>
        <div class="summary-sub" id="sumNetSub">Plan / GerÃ§ek</div>
      </div>
    </section>

    <div class="tabs">
      <div class="tab active" data-tab="budget">BÃ¼tÃ§e</div>
      <div class="tab" data-tab="transactions">Ä°ÅŸlemler</div>
      <div class="tab" data-tab="balance">BilanÃ§o</div>
    </div>

    <section class="section active" id="budget-section">
      <div class="section-title">
        <span>Kur Tahminleri (Plan)</span>
        <button class="add-btn" id="btnRatesEdit" type="button">
          <i class="fas fa-pen"></i> DÃ¼zenle
        </button>
      </div>
      <div class="rates-card" id="ratesCard"></div>

      <div class="section-title" style="margin-top:18px;">
        <span>Gelir Kalemleri</span>
        <button class="add-btn" type="button" onclick="openCategoryModal('income')">
          <i class="fas fa-plus"></i> Ekle
        </button>
      </div>
      <div id="incomeBudgets"></div>

      <div class="section-title" style="margin-top:18px;">
        <span>Gider Kalemleri</span>
        <button class="add-btn" type="button" onclick="openCategoryModal('expense')">
          <i class="fas fa-plus"></i> Ekle
        </button>
      </div>
      <div id="expenseBudgets"></div>
    </section>

    <section class="section" id="transactions-section">
      <div class="month-filter" id="monthFilter"></div>
      <div id="transactionsList"></div>
    </section>

    <section class="section" id="balance-section">
      <div class="month-filter" id="balMonthFilter"></div>

      <div class="balance-top">
        <div class="balance-kpi"><div class="kpi-title">VarlÄ±klar</div><div class="kpi-value" id="balAssets">$0</div></div>
        <div class="balance-kpi"><div class="kpi-title">BorÃ§lar</div><div class="kpi-value" id="balLiab">$0</div></div>
        <div class="balance-kpi"><div class="kpi-title">Ã–z Sermaye</div><div class="kpi-value" id="balEquity">$0</div></div>
      </div>

      <div class="chart-card">
        <div class="chart-title">AylÄ±k Trend (USD)</div>
        <canvas id="balanceChart"></canvas>
      </div>

      <div class="note muted">BilanÃ§o ekranÄ± Ã§alÄ±ÅŸmÄ±yorsa %99 app.js yÃ¼klenmiyordur.</div>
    </section>
  </main>

  <button class="fab" type="button" onclick="openTransactionModal()">
    <i class="fas fa-plus"></i>
  </button>

  <!-- ModallarÄ±n divâ€™leri sende mevcutsa kalsÄ±n; yoksa app.js zaten patlar. -->

  <!-- âœ… SÄ±ra Ã¶nemli: Ã¶nce firebase module, sonra app -->
  <script type="module" src="firebase.js?v=20260212-1"></script>
  <script defer src="app.js?v=20260212-1"></script>

  <!-- âœ… app.js yÃ¼klenmezse bunu gÃ¶r -->
  <script>
    window.addEventListener("error", (e)=> {
      if ((e.filename||"").includes("app.js")) alert("app.js yÃ¼klenemedi / hata verdi. Dosya adÄ± (app.js) ve GitHub Pages path kontrol.");
    });
  </script>
</body>
</html>
